import ApiReference from '../components/ApiReference'

### Rulebricks API

<ApiReference />

---

### Rulebricks SDK

#### <ins>Python</ins>

[![pypi](https://img.shields.io/pypi/v/rulebricks.svg)](https://pypi.python.org/pypi/rulebricks)

The [Rulebricks Python SDK](https://github.com/rulebricks/python-sdk) provides convenient access to the Rulebricks API from Python. SDK usage largely mirrors the API itself, with methods for solving rules, bulk solving rules, and more.

##### Installation

Add this dependency to your project's build file:

```bash
pip install rulebricks
# or
poetry add rulebricks
```

##### Configuration

Before using the SDK, configure your API key. You can find your API key in your Rulebricks Dashboard.

```python
import rulebricks as rb

# Replace 'XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX' with your actual API key
rb.configure(
    api_key="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
    # base_url="https://rulebricks.com" # Optional: Use this to override the default base URL for private cloud deployments
    # timeout=10 # Optional: Use this to override the default timeout in seconds
)
```

##### Basic Usage

Using the SDK to interact with the Rulebricks API in a synchronous manner is simple.

Here's an example of how to use our Python SDK to solve a rule:

```python
import rulebricks as rb

# Set the API key
rb.configure(
    api_key="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
)

result = rb.rules.solve(
    slug="tJOCd8XXXX",
    request={
        "customer_id": "anc39as3",
        "purchase_history": ["t-shirt", "mug"],
        "account_age_days": 4,
        "last_purchase_days_ago": 3,
        "email_subscription": False
    }
)

print(result)
```

##### Asynchronous Usage

For asynchronous API calls, access methods via the async_api attribute.

This allows you to leverage Python's asyncio library for non-blocking operations:

```python
import rulebricks as rb
import asyncio

# Set the API key
rb.configure(
    api_key="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"
)

async def main():
    async_result = await rb.async_api.rules.solve(
        slug="tJOCd8XXXX",
        request={
            "customer_id": "anc39as3",
            "purchase_history": ["t-shirt", "mug"],
            "account_age_days": 4,
            "last_purchase_days_ago": 3,
            "email_subscription": False
        }
    )
    print(async_result)

if __name__ == "__main__":
    asyncio.run(main())
```

Using a combination of `solve`, `bulk_solve`, `parallel_solve` and `flows` in synchronous or asynchronous modes gives you high flexibility to interact with the Rulebricks API in a way that best suits your application's needs.

---

#### <ins>Node.js/Typescript</ins>

[![npm shield](https://img.shields.io/npm/v/@rulebricks/api)](https://www.npmjs.com/package/@rulebricks/api)

The [Rulebricks Node.js library](https://github.com/rulebricks/node-sdk) provides convenient access to the Rulebricks API from JavaScript/TypeScript. SDK usage largely mirrors the API itself, with methods for solving rules, bulk solving rules, and more.

##### Installation

```
npm install --save @rulebricks/api
# or
yarn add @rulebricks/api
```

##### Usage

```typescript
import { RulebricksClient } from '@rulebricks/api';

const rulebricks = new RulebricksClient({
  apiKey: 'XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX',
  environment: 'https://rulebricks.com',
});

rulebricks.rules.solve('tJOCd8XXXX', {
  customer_id: 'anc39as3',
  purchase_history: ['t-shirt', 'mug'],,
  account_age_days: 4,
  last_purchase_days_ago: 3,
  email_subscription: false,
}, {
  // Request options (Optional, leave empty for default values)
  // timeoutInSeconds: 10, (Optional: Use this to override the default timeout in seconds)
  // maxRetries: 3, (Optional: Use this to override the default number of retries)
}).then((result) => {
  console.log(result);
}).catch((err) => {
  console.error(err);
});
```

##### Handling errors

When the API returns a non-success status code (4xx or 5xx response), a subclass of `RulebricksApiError` will be thrown:

```ts
try {
  // ...
} catch (err) {
  if (err instanceof RulebricksApiError) {
    console.log(err.statusCode) // 400
    console.log(err.message) // "BadRequestError"
    console.log(err.body) // list of errors
  }
}
```

Error codes are as followed:

| Status Code | Error Type            |
| ----------- | --------------------- |
| 400         | `BadRequestError`     |
| 429         | `RateLimitError`      |
| 500         | `InternalServerError` |

##### Contributing

This library is generated programmatically. We suggest [opening an issue](https://github.com/rulebricks/node-sdk/issues) to discuss any issues or feature requests with us.

##### License

This project is licensed under the MIT License - see the [LICENSE](LICENSE.txt) file for details.

---

#### <ins>Java</ins>

The [Rulebricks Java SDK](https://github.com/rulebricks/java-sdk) provides convenient access to the Rulebricks API from Java applications. SDK usage allows for solving rules, bulk solving rules, and more.

##### Installation

For Maven, add this dependency to your project's `pom.xml` file:

```xml
<dependency>
  <groupId>com.rulebricks</groupId>
  <artifactId>rulebricks-sdk-java</artifactId>
  <version>1.0.0</version>
</dependency>
```

For Gradle, add this to your `build.gradle` file:

```groovy
implementation 'com.rulebricks:rulebricks-sdk-java:1.0.0'
```

##### Configuration

Instantiate a `RulebricksApiClient` with your API key:

```java
RulebricksApiClient client = RulebricksApiClient.builder()
    .apiKey("YOUR_API_KEY")
    .build();
```

##### Basic Usage

Solve a rule:

```java
Map<String, Object> requestData = new HashMap<>();
requestData.put("dataKey", "dataValue");

Map<String, Object> result = client.rules().solve("rule-slug", requestData);
```

Bulk solve rules:

```java
List<Map<String, Object>> requestDataList = new ArrayList<>();
requestDataList.add(requestData);

List<Map<String, Object>> results = client.rules().bulkSolve("rule-slug", requestDataList);
```

Parallel solve rules:

```java
Map<String, Map<String, Object>> requestDataMap = new HashMap<>();
requestDataMap.put("rule-slug", requestData);

Map<String, Object> results = client.rules().parallelSolve(requestDataMap);
```

##### Error Handling

The SDK throws exceptions to indicate API errors:

```java
try {
    Map<String, Object> result = client.rules().solve("rule-slug", requestData);
} catch (Exception e) {
    // Handle the error
}
```

##### Feedback and Contributions

Feedback and contributions are welcome. Please report any issues or suggestions through the [GitHub issue tracker](https://github.com/rulebricks/java-sdk/issues).

##### License

The Rulebricks Java SDK is released under the MIT License. See the LICENSE file for more details.
