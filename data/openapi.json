{
  "openapi": "3.0.0",
  "info": {
    "title": "Rulebricks",
    "summary": "Documentation for solving and managing rules, flows, values, and users programmatically in Rulebricks.",
    "description": "Documentation for solving and managing rules, flows, values, and users programmatically in Rulebricks.",
    "version": "1.2.0",
    "termsOfService": "https://www.rulebricks.com/legal/terms-of-service",
    "contact": {
      "name": "Rulebricks Support",
      "url": "https://www.rulebricks.com/",
      "email": "support@rulebricks.com"
    }
  },
  "servers": [
    {
      "url": "{server}/api/v1",
      "description": "Rulebricks Instance URL",
      "variables": {
        "server": {
          "default": "https://rulebricks.com",
          "description": "The base URL for your Rulebricks instance"
        }
      }
    }
  ],
  "tags": [
    {
      "name": "Rules",
      "description": "Operations for efficiently executing individual rules in different formats"
    },
    {
      "name": "Flows",
      "description": "Operations for executing flows, which are sequences of rules and external actions"
    },
    {
      "name": "Assets",
      "description": "Administrative operations for managing rules, flows, folders, and usage"
    },
    {
      "name": "Tests",
      "description": "Administrative operations for programmatically managing test suites for rules and flows"
    },
    {
      "name": "Users",
      "description": "Operations for managing users on your team and their permissions"
    },
    {
      "name": "Values",
      "description": "Operations for managing dynamic values referenced in rules"
    },
    {
      "name": "Decisions",
      "description": "Query highly detailed logs of prior rule executions within the last 90 days"
    },
    {
      "name": "Contexts",
      "description": "Operations for managing and interacting with Contexts (Entities) and their instances"
    }
  ],
  "paths": {
    "/solve/{slug}": {
      "post": {
        "summary": "Solve a rule",
        "description": "Executes a single rule identified by a unique slug. The request and response formats are dynamic, dependent on the rule configuration.",
        "tags": ["Rules"],
        "operationId": "solve",
        "x-fern-sdk-group-name": "rules",
        "x-fern-sdk-method-name": "solve",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          }
        ],
        "requestBody": {
          "description": "User defined JSON payload based on the rule's request schema, as defined in the rule editor.",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DynamicRequestPayload"
              },
              "examples": {
                "solveRequestExample": {
                  "summary": "Sample rule execution request JSON object. This value is dependent entirely on the rule's request schema.",
                  "value": {
                    "name": "John Doe",
                    "age": 30,
                    "email": "jdoe@acme.co"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rule execution successful. The response structure depends on the rule configuration.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DynamicResponsePayload"
                },
                "examples": {
                  "solveResponseExample": {
                    "summary": "Sample rule execution response JSON object. The structure is dependent on the rule's response schema.",
                    "value": {
                      "eligible": true,
                      "message": "User is eligible for the promotion."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/bulk-solve/{slug}": {
      "post": {
        "summary": "Bulk solve rules",
        "description": "Executes a particular rule against multiple request data payloads provided in a list.",
        "tags": ["Rules"],
        "operationId": "bulkSolve",
        "x-fern-sdk-group-name": "rules",
        "x-fern-sdk-method-name": "bulkSolve",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          }
        ],
        "requestBody": {
          "description": "Array of JSON request data payloads, each based on the rule's request schema, as defined in the rule editor. A maximum of 1000 payloads can be submitted at a time.",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/DynamicRequestPayload"
                }
              },
              "examples": {
                "bulkRequestExample": {
                  "summary": "Example of a bulk rule execution request. Each object in the array is a request payload for the rule.",
                  "value": [
                    {
                      "name": "John Doe",
                      "age": 30,
                      "email": "jdoe@acme.co"
                    },
                    {
                      "name": "Jane Doe",
                      "age": 28,
                      "email": "jane@example.com"
                    }
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bulk rule execution successful. The response is an array of results, each dependent on the rule configuration.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BulkRuleResponseItem"
                  }
                },
                "examples": {
                  "bulkResponseExample": {
                    "summary": "Example of a bulk rule execution response. Each object in the array is a response from the rule, in the same order as the request payloads.",
                    "value": [
                      {
                        "eligible": true,
                        "message": "User is eligible for the promotion."
                      },
                      {
                        "eligible": false,
                        "message": "User is not eligible for the promotion."
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/parallel-solve": {
      "post": {
        "summary": "Parallel solve rules or flows",
        "description": "Executes multiple rules or flows in parallel based on a provided mapping of rule/flow slugs to payloads.",
        "tags": ["Rules"],
        "operationId": "parallelSolve",
        "x-fern-sdk-group-name": "rules",
        "x-fern-sdk-method-name": "parallelSolve",
        "requestBody": {
          "description": "A JSON object where rule/flow slugs are nested keys with the $rule (or $flow) key at the same level as the rule/flow's intended request payload. Top-level $rule/$flow keys are not allowed.",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ParallelSolveRequest"
              },
              "examples": {
                "parallelRequestExample": {
                  "summary": "Example of a parallel rule execution request. Note that $rule is a reserved key and should be included as a non-top-level key alongside each rule's intended request payload.",
                  "value": {
                    "eligibility": {
                      "$rule": "1ef03ms",
                      "name": "John Doe",
                      "age": 30,
                      "email": "jdoe@acme.co"
                    },
                    "offers": {
                      "$flow": "OvmsYwn",
                      "customer_id": "12345",
                      "last_purchase_days_ago": 30,
                      "selected_plan": "premium"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Parallel execution successful. The response is an object mirroring the request structure, but providing each rule/flow's results instead.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ParallelSolveResponse"
                },
                "examples": {
                  "parallelResponseExample": {
                    "summary": "Example of parallel execution response. The response structure mirrors the request structure, stripped of the $rule/$flow key and request data.",
                    "value": {
                      "eligibility": {
                        "eligible": true,
                        "message": "User is eligible for the product."
                      },
                      "offers": {
                        "flat_discount": 13.2,
                        "free_shipping": true
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/flows/{slug}": {
      "post": {
        "summary": "Execute a flow",
        "description": "Execute a flow by its slug.",
        "tags": ["Flows"],
        "operationId": "execute",
        "x-fern-sdk-group-name": "flows",
        "x-fern-sdk-method-name": "execute",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          }
        ],
        "requestBody": {
          "description": "A JSON object matching the expected schema of the origin rule of the flow.",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DynamicRequestPayload"
              },
              "examples": {
                "flowRequestExample": {
                  "summary": "Example of a flow execution request.",
                  "value": {
                    "name": "John Doe",
                    "age": 30,
                    "email": "jdoe@acme.co"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Flow execution successful.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DynamicResponsePayload"
                },
                "examples": {
                  "flowResponseExample": {
                    "summary": "Example of a flow execution response.",
                    "value": {
                      "eligible": true,
                      "message": "User is eligible for the promotion."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/decisions/query": {
      "get": {
        "summary": "Query decision logs with advanced filtering",
        "description": "Query decision logs with support for the decision data query language, rule/status filters, date ranges, and pagination. The query language supports field comparisons (e.g., `alpha=0`, `score>10`), contains/not-contains (e.g., `name:John`, `status!:error`), boolean logic (`AND`, `OR`), and parentheses for grouping.",
        "tags": ["Decisions"],
        "operationId": "query",
        "x-fern-sdk-group-name": "decisions",
        "x-fern-sdk-method-name": "query",
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "description": "Decision data query language expression to filter logs by request/response data. Supports field comparisons (`field=value`, `field>10`), contains (`field:text`), not-contains (`field!:text`), boolean operators (`AND`, `OR`), and parentheses.",
            "schema": {
              "type": "string"
            },
            "examples": {
              "equality": {
                "value": "status=200",
                "summary": "Filter by exact field value"
              },
              "comparison": {
                "value": "score>50 AND eligible=true",
                "summary": "Numeric comparison with boolean logic"
              },
              "contains": {
                "value": "name:John OR email:example.com",
                "summary": "String contains search"
              },
              "complex": {
                "value": "(status=200 AND score>10) OR priority=high",
                "summary": "Complex query with grouping"
              }
            }
          },
          {
            "name": "rules",
            "in": "query",
            "required": false,
            "description": "Comma-separated list of rule names to filter logs by.",
            "schema": {
              "type": "string"
            },
            "example": "Lead Qualification,Pricing Calculator"
          },
          {
            "name": "statuses",
            "in": "query",
            "required": false,
            "description": "Comma-separated list of HTTP status codes to filter logs by.",
            "schema": {
              "type": "string"
            },
            "example": "200,400,500"
          },
          {
            "name": "start",
            "in": "query",
            "required": false,
            "description": "Start date for the query range (ISO8601 format).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "end",
            "in": "query",
            "required": false,
            "description": "End date for the query range (ISO8601 format).",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "cursor",
            "in": "query",
            "required": false,
            "description": "Cursor for pagination (returned from previous query).",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Number of results to return per page (default: 100).",
            "schema": {
              "type": "integer",
              "default": 100
            }
          },
          {
            "name": "count",
            "in": "query",
            "required": false,
            "description": "If set to 'true', returns only the count of matching logs instead of the log data.",
            "schema": {
              "type": "string",
              "enum": ["true", "false"]
            }
          },
          {
            "name": "slug",
            "in": "query",
            "required": false,
            "description": "(Deprecated) Legacy parameter for filtering by rule slug. Use 'rules' parameter instead.",
            "schema": {
              "type": "string"
            },
            "deprecated": true
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DecisionLogResponse"
                },
                "examples": {
                  "logsResponse": {
                    "summary": "Decision logs with data",
                    "value": {
                      "data": [
                        {
                          "timestamp": "2024-12-17T10:30:00.000Z",
                          "name": "Lead Qualification",
                          "endpoint": "/api/v1/solve/lead-qual",
                          "status": 200,
                          "request": {
                            "email": "user@example.com",
                            "score": 75
                          },
                          "response": {
                            "qualified": true,
                            "tier": "gold"
                          },
                          "decision": {
                            "matchedRows": [0, 2],
                            "duration": 0.05
                          },
                          "error": null,
                          "abbreviated": false
                        }
                      ],
                      "cursor": "100"
                    }
                  },
                  "countResponse": {
                    "summary": "Count-only response",
                    "value": {
                      "count": 1542
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/rules/delete": {
      "delete": {
        "summary": "Delete a rule",
        "description": "Delete a specific rule by its ID.",
        "tags": ["Assets"],
        "operationId": "deleteRule",
        "x-fern-sdk-group-name": ["assets", "rules"],
        "x-fern-sdk-method-name": "delete",
        "x-fern-examples": [
          {
            "name": "Delete a rule",
            "request": {
              "id": "2855f8da-2654-4df9-8903-8f797cbfe8eb"
            },
            "response": {
              "body": {
                "message": "Rule deleted successfully."
              }
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteRuleRequest"
              },
              "example": {
                "id": "2855f8da-2654-4df9-8903-8f797cbfe8eb"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rule deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessMessage"
                },
                "example": {
                  "message": "Rule deleted successfully."
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/rules/export": {
      "get": {
        "summary": "Export a rule",
        "description": "Export a specific rule by its ID.",
        "tags": ["Assets"],
        "operationId": "exportRule",
        "x-fern-sdk-group-name": ["assets", "rules"],
        "x-fern-sdk-method-name": "pull",
        "x-fern-examples": [
          {
            "name": "Export a rule",
            "query-parameters": {
              "id": "2855f8da-2654-4df9-8903-8f797cbfe8eb"
            },
            "response": {
              "body": {}
            }
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "description": "The ID of the rule to export.",
            "schema": {
              "type": "string"
            },
            "example": "2855f8da-2654-4df9-8903-8f797cbfe8eb"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RuleExport"
                },
                "example": {
                  "name": "Exported Rule",
                  "description": "A rule exported via API"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/rules/import": {
      "post": {
        "summary": "Import a rule",
        "description": "Import a rule into the user's account.",
        "tags": ["Assets"],
        "operationId": "importRule",
        "x-fern-sdk-group-name": ["assets", "rules"],
        "x-fern-sdk-method-name": "push",
        "x-fern-examples": [
          {
            "name": "Import a rule",
            "request": {
              "rule": {
                "name": "Imported Rule",
                "description": "A rule imported via API"
              }
            },
            "response": {
              "body": {}
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImportRuleRequest"
              },
              "example": {
                "rule": {
                  "name": "Imported Rule",
                  "description": "A rule imported via API"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Rule imported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RuleExport"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "403": {
            "description": "Forbidden - Plan limit reached",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/rules/list": {
      "get": {
        "summary": "List rules",
        "description": "List all rules in the organization. Optionally filter by folder name or ID.",
        "tags": ["Assets"],
        "operationId": "listRules",
        "x-fern-sdk-group-name": ["assets", "rules"],
        "x-fern-sdk-method-name": "list",
        "x-fern-examples": [
          {
            "name": "List rules in folder",
            "query-parameters": {
              "folder": "Marketing Rules"
            },
            "response": {
              "body": []
            }
          }
        ],
        "parameters": [
          {
            "name": "folder",
            "in": "query",
            "description": "Filter rules by folder name or folder ID",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RuleListResponse"
                },
                "example": [
                  {
                    "id": "2855f8da-2654-4df9-8903-8f797cbfe8eb",
                    "created_at": "2024-04-23T23:55:38.348Z",
                    "name": "Qualify Leads from HubSpot",
                    "description": "Qualify leads based on incoming HubSpot data.",
                    "slug": "w5Q4zhD_Kp",
                    "folder": {
                      "id": "abc123",
                      "name": "Marketing Rules",
                      "description": "Rules for marketing automation workflows",
                      "updated_at": "2024-04-23T23:55:38.348Z"
                    },
                    "request_schema": [
                      {
                        "key": "industry",
                        "show": true,
                        "name": "Industry",
                        "description": "",
                        "type": "string",
                        "defaultValue": "finance",
                        "defaultComputedValue": null,
                        "transform": ""
                      },
                      {
                        "key": "approx_size",
                        "show": true,
                        "name": "Approximate Size",
                        "description": "",
                        "type": "number",
                        "defaultValue": 100,
                        "defaultComputedValue": null,
                        "transform": ""
                      },
                      {
                        "key": "approx_budget",
                        "show": true,
                        "name": "Budget",
                        "description": "",
                        "type": "number",
                        "defaultValue": 13000,
                        "defaultComputedValue": null,
                        "transform": ""
                      }
                    ],
                    "response_schema": [
                      {
                        "key": "score",
                        "show": true,
                        "name": "Score",
                        "description": "",
                        "type": "number",
                        "defaultValue": 0,
                        "defaultComputedValue": null,
                        "transform": ""
                      },
                      {
                        "key": "follow_up",
                        "show": true,
                        "name": "Follow Up",
                        "description": "",
                        "type": "boolean",
                        "defaultValue": false,
                        "defaultComputedValue": null,
                        "transform": ""
                      }
                    ]
                  }
                ]
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/flows/list": {
      "get": {
        "summary": "List flows",
        "description": "List all flows in the organization.",
        "tags": ["Assets"],
        "operationId": "listFlows",
        "x-fern-sdk-group-name": ["assets", "flows"],
        "x-fern-sdk-method-name": "list",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowListResponse"
                },
                "examples": {
                  "listFlowsExample": {
                    "summary": "Example of a flow list response.",
                    "value": [
                      {
                        "id": "3855f8da-2654-4df9-8903-8f797cbfe8ec",
                        "name": "Customer Onboarding Flow",
                        "description": "Automate the onboarding process for new customers.",
                        "slug": "x6Q4zhD_Lm",
                        "published": true,
                        "updated_at": "2024-05-15T10:30:22.123456+00:00",
                        "origin_rule": {
                          "id": "rule-1234-5678-90ab",
                          "name": "Customer Eligibility",
                          "slug": "customer-eligibility"
                        },
                        "context": {
                          "id": "ctx-abcd-efgh-ijkl",
                          "name": "Customer",
                          "slug": "customer"
                        }
                      },
                      {
                        "id": "2a163563-8ef4-4f32-ba62-6242071b58b7",
                        "name": "Order Processing Flow",
                        "description": "Streamline order processing and fulfillment.",
                        "slug": "uKPCd8hdsZ",
                        "published": false,
                        "updated_at": "2024-04-18T14:45:33.987654+00:00",
                        "origin_rule": null,
                        "context": null
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/users/invite": {
      "post": {
        "summary": "Invite a new user or update permissions for an existing user.",
        "description": "Invite a new user to the organization or update role or access group data for an existing user.",
        "tags": ["Users"],
        "operationId": "inviteUser",
        "x-fern-sdk-group-name": "users",
        "x-fern-sdk-method-name": "invite",
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserInviteRequest"
              },
              "examples": {
                "InviteNewUser": {
                  "value": {
                    "email": "newuser@example.com",
                    "role": "developer",
                    "user_groups": ["group1", "group2"]
                  }
                },
                "UpdateExistingUser": {
                  "value": {
                    "email": "existinguser@example.com",
                    "role": "custom-role",
                    "user_groups": ["group1"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invite successful or permissions updated successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserInviteResponse"
                },
                "examples": {
                  "InviteSuccess": {
                    "value": {
                      "message": "Invite successful",
                      "user": {
                        "email": "newuser@example.com",
                        "role": "developer",
                        "user_groups": ["group1", "group2"]
                      }
                    }
                  },
                  "PermissionsUpdated": {
                    "value": {
                      "message": "Invitee permissions updated successfully",
                      "user": {
                        "email": "existinguser@example.com",
                        "role": "editor",
                        "user_groups": ["group1", "group3"]
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "MissingEmail": {
                    "value": "Missing invitee email in request body. An email is required to invite a user to your Rulebricks team."
                  },
                  "InvalidEmail": {
                    "value": "Invalid email address. Please provide a valid email address to invite a user to your Rulebricks team."
                  },
                  "CannotInviteSelf": {
                    "value": "You cannot invite yourself to your own team. Please provide a different email address."
                  },
                  "UserAlreadyInAnotherTeam": {
                    "value": "The user with email existinguser@example.com is already part of another team. They must leave their current team before joining yours."
                  },
                  "InvalidRole": {
                    "value": "Invalid role provided. Please provide a valid role ('editor' or 'developer') to update the user's permissions."
                  },
                  "InvalidAccessGroups": {
                    "value": "Invalid user_groups provided. All groups must exist and must match exactly in either name or ID (case-sensitive). Missing groups: group3"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Internal server error."
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/groups": {
      "get": {
        "summary": "List user groups.",
        "description": "List all user groups available in your Rulebricks organization.",
        "tags": ["Users"],
        "operationId": "listGroups",
        "x-fern-sdk-group-name": ["users", "groups"],
        "x-fern-sdk-method-name": "list",
        "x-fern-examples": [
          {
            "name": "List user groups",
            "response": {
              "body": []
            }
          }
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of user groups.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserGroupListResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Internal server error."
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new user group.",
        "description": "Create a new user group in your Rulebricks organization.",
        "tags": ["Users"],
        "operationId": "createGroup",
        "x-fern-sdk-group-name": ["users", "groups"],
        "x-fern-sdk-method-name": "create",
        "x-fern-examples": [
          {
            "name": "Create a user group",
            "request": {
              "name": "NewGroup",
              "description": "Description of the new group."
            },
            "response": {
              "body": {
                "id": "a1b2c3d4-e5f6-7890-ab12-cd34ef56gh78",
                "name": "NewGroup",
                "description": "Description of the new group.",
                "members": []
              }
            }
          }
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserGroupRequest"
              },
              "example": {
                "name": "NewGroup",
                "description": "Description of the new group."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group created successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserGroup"
                }
              }
            }
          },
          "400": {
            "description": "Bad request.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "MissingName": {
                    "value": "Missing name property in request body. Groups must have a unique name."
                  },
                  "NameTooLong": {
                    "value": "Group names must be 50 characters or less. Please provide a shorter name."
                  },
                  "InvalidDescription": {
                    "value": "Description property must be a string. Please provide a valid description."
                  },
                  "GroupAlreadyExists": {
                    "value": "Group with name NewGroup already exists. Group names must be unique."
                  },
                  "MembersNotAllowed": {
                    "value": "Members cannot be added when creating a new group. Please create the group first and then add members using the /v1/admin/users/invite endpoint, which can invite users to groups or update existing users' group memberships."
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Internal server error."
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/list": {
      "get": {
        "summary": "List all users in the organization",
        "description": "List all users (including the admin and all team members) in the organization with their details including email, name, API key, role, access groups, and join date.",
        "tags": ["Users"],
        "operationId": "listUsers",
        "x-fern-sdk-group-name": "users",
        "x-fern-sdk-method-name": "list",
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of users in the organization.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserListResponse"
                },
                "examples": {
                  "example": {
                    "value": [
                      {
                        "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                        "email": "admin@example.com",
                        "name": "Admin User",
                        "api_key": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                        "role": "administrator",
                        "user_groups": [],
                        "joined_at": "2024-01-15T10:30:00.000Z"
                      },
                      {
                        "id": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
                        "email": "developer@example.com",
                        "name": "Developer User",
                        "api_key": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
                        "role": "developer",
                        "user_groups": ["engineering", "qa"],
                        "joined_at": "2024-02-20T14:45:00.000Z"
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/users/create": {
      "post": {
        "summary": "Create a new user without email confirmation",
        "description": "Create a new user directly with a password, bypassing the email invitation flow. The user can immediately log in with the provided credentials.",
        "tags": ["Users"],
        "operationId": "createUser",
        "x-fern-sdk-group-name": "users",
        "x-fern-sdk-method-name": "create",
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserRequest"
              },
              "examples": {
                "minimalUser": {
                  "summary": "Create user with minimal fields",
                  "value": {
                    "email": "newuser@example.com",
                    "password": "securePassword123"
                  }
                },
                "fullUser": {
                  "summary": "Create user with all fields",
                  "value": {
                    "email": "newuser@example.com",
                    "password": "securePassword123",
                    "name": "New User",
                    "role": "developer",
                    "user_groups": ["engineering", "qa"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateUserResponse"
                },
                "example": {
                  "status": "success",
                  "message": "User newuser@example.com created successfully",
                  "user": {
                    "id": "c3d4e5f6-a7b8-9012-cdef-123456789012",
                    "email": "newuser@example.com",
                    "name": "New User",
                    "role": "developer",
                    "user_groups": ["engineering", "qa"],
                    "api_key": "c3d4e5f6-a7b8-9012-cdef-123456789012"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "MissingEmail": {
                    "value": "Missing email in request body"
                  },
                  "InvalidEmail": {
                    "value": "Invalid email address format"
                  },
                  "MissingPassword": {
                    "value": "Password is required"
                  },
                  "WeakPassword": {
                    "value": "Password must be at least 8 characters"
                  },
                  "UserExists": {
                    "value": "User with email newuser@example.com already exists in your organization"
                  },
                  "InvalidRole": {
                    "value": "Invalid role 'invalid'. Must be one of: editor, developer"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Plan limit reached.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "example": "You've reached your plan's team member limit (10). Please upgrade to add more members."
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/admin/rules/{slug}/tests": {
      "get": {
        "tags": ["Tests"],
        "summary": "List tests for a rule",
        "description": "Retrieves a list of tests associated with the rule identified by the slug.",
        "operationId": "listRuleTests",
        "x-fern-sdk-group-name": ["tests", "rules"],
        "x-fern-sdk-method-name": "list",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "A list of tests for the specified rule.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestListResponse"
                },
                "examples": {
                  "example": {
                    "value": [
                      {
                        "id": "Wk0CWqGcwrRnezjUJ5N7O",
                        "name": "Test 1",
                        "error": false,
                        "request": {
                          "beta": "a",
                          "alpha": 0,
                          "charlie": true
                        },
                        "response": {
                          "error": false,
                          "status": "success"
                        },
                        "success": true,
                        "critical": true,
                        "testState": {
                          "duration": 0.10000038146972656,
                          "response": {
                            "error": false,
                            "status": "success"
                          },
                          "conditions": [
                            {
                              "alpha": {
                                "result": true
                              }
                            }
                          ],
                          "httpStatus": 200,
                          "successIdxs": [0],
                          "evaluationError": false
                        },
                        "lastExecuted": "2024-09-24T17:26:54.150Z"
                      },
                      {
                        "id": "Mog-TOCOxUFBVXfuk2xVp",
                        "name": "Test 2",
                        "error": true,
                        "request": {},
                        "response": {
                          "error": false,
                          "status": "success"
                        },
                        "success": false,
                        "critical": true,
                        "testState": {
                          "duration": 0.09999942779541016,
                          "response": null,
                          "conditions": [
                            {
                              "alpha": {
                                "err": "missing",
                                "result": false
                              }
                            }
                          ],
                          "httpStatus": 400,
                          "successIdxs": [],
                          "evaluationError": "No successful rows found. If this is not what you were expecting, check your input data and rule conditions."
                        },
                        "lastExecuted": "2024-09-24T17:26:54.150Z"
                      }
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "tags": ["Tests"],
        "summary": "Create a new test for a rule",
        "description": "Adds a new test to the test suite of a rule identified by the slug.",
        "operationId": "createRuleTest",
        "x-fern-sdk-group-name": ["tests", "rules"],
        "x-fern-sdk-method-name": "create",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          }
        ],
        "requestBody": {
          "description": "Details of the test to create.",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTestRequest"
              },
              "example": {
                "name": "Test 3",
                "request": {
                  "param1": "value1"
                },
                "response": {
                  "status": "success"
                },
                "critical": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Test created successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Test"
                },
                "example": {
                  "id": "c1a2b3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
                  "name": "Test 3",
                  "request": {
                    "param1": "value1"
                  },
                  "response": {
                    "status": "success"
                  },
                  "critical": true,
                  "error": false,
                  "success": false,
                  "testState": null,
                  "lastExecuted": null
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/rules/{slug}/tests/{testId}": {
      "delete": {
        "tags": ["Tests"],
        "summary": "Delete a test from a rule",
        "description": "Deletes a test from the test suite of a rule identified by the slug.",
        "operationId": "deleteRuleTest",
        "x-fern-sdk-group-name": ["tests", "rules"],
        "x-fern-sdk-method-name": "delete",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          },
          {
            "$ref": "#/components/parameters/TestIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Test deleted successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Test"
                },
                "example": {
                  "id": "c1a2b3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
                  "name": "Test 3",
                  "request": {
                    "param1": "value1"
                  },
                  "response": {
                    "status": "success"
                  },
                  "critical": true,
                  "error": false,
                  "success": false,
                  "testState": null,
                  "lastExecuted": null
                }
              }
            }
          },
          "404": {
            "description": "Rule or test not found.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Test with id {testId} not found."
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/flows/{slug}/tests": {
      "get": {
        "tags": ["Tests"],
        "summary": "List tests for a flow",
        "description": "Retrieves a list of tests associated with the flow identified by the slug.",
        "operationId": "listFlowTests",
        "x-fern-sdk-group-name": ["tests", "flows"],
        "x-fern-sdk-method-name": "list",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "A list of tests for the specified flow.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestListResponse"
                },
                "examples": {
                  "example": {
                    "value": [
                      {
                        "id": "Wk0CWqGcwrRnezjUJ5N7O",
                        "name": "Test 1",
                        "error": false,
                        "request": {
                          "beta": "a",
                          "alpha": 0,
                          "charlie": true
                        },
                        "response": {
                          "error": false,
                          "status": "success"
                        },
                        "success": true,
                        "critical": true,
                        "testState": {
                          "duration": 0.10000038146972656,
                          "response": {
                            "error": false,
                            "status": "success"
                          },
                          "httpStatus": 200,
                          "evaluationError": false
                        },
                        "lastExecuted": "2024-09-24T17:26:54.150Z"
                      },
                      {
                        "id": "Mog-TOCOxUFBVXfuk2xVp",
                        "name": "Test 2",
                        "error": true,
                        "request": {},
                        "response": {
                          "error": false,
                          "status": "success"
                        },
                        "success": false,
                        "critical": true,
                        "testState": {
                          "duration": 0.09999942779541016,
                          "response": null,
                          "httpStatus": 400,
                          "evaluationError": "No successful rows found. If this is not what you were expecting, check your input data and rule conditions."
                        },
                        "lastExecuted": "2024-09-24T17:26:54.150Z"
                      }
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "tags": ["Tests"],
        "summary": "Create a new test for a flow",
        "description": "Adds a new test to the test suite of a flow identified by the slug.",
        "operationId": "createFlowTest",
        "x-fern-sdk-group-name": ["tests", "flows"],
        "x-fern-sdk-method-name": "create",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          }
        ],
        "requestBody": {
          "description": "Details of the test to create.",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTestRequest"
              },
              "example": {
                "name": "Test 3",
                "request": {
                  "param1": "value1"
                },
                "response": {
                  "status": "success"
                },
                "critical": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Test created successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Test"
                },
                "example": {
                  "id": "c1a2b3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
                  "name": "Test 3",
                  "request": {
                    "param1": "value1"
                  },
                  "response": {
                    "status": "success"
                  },
                  "critical": true,
                  "error": false,
                  "success": false,
                  "testState": null,
                  "lastExecuted": null
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/flows/{slug}/tests/{testId}": {
      "delete": {
        "tags": ["Tests"],
        "summary": "Delete a test from a flow",
        "description": "Deletes a test from the test suite of a flow identified by the slug.",
        "operationId": "deleteFlowTest",
        "x-fern-sdk-group-name": ["tests", "flows"],
        "x-fern-sdk-method-name": "delete",
        "parameters": [
          {
            "$ref": "#/components/parameters/SlugParameter"
          },
          {
            "$ref": "#/components/parameters/TestIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Test deleted successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Test"
                },
                "example": {
                  "id": "c1a2b3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
                  "name": "Test 3",
                  "request": {
                    "param1": "value1"
                  },
                  "response": {
                    "status": "success"
                  },
                  "critical": true,
                  "error": false,
                  "success": false,
                  "testState": null,
                  "lastExecuted": null
                }
              }
            }
          },
          "404": {
            "description": "Rule or test not found.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Test with id {testId} not found."
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/usage": {
      "get": {
        "summary": "Get usage",
        "description": "Get the rule execution usage of your organization.",
        "tags": ["Assets"],
        "operationId": "getUsage",
        "x-fern-sdk-group-name": "assets",
        "x-fern-sdk-method-name": "getUsage",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStatistics"
                },
                "examples": {
                  "usageExample": {
                    "summary": "Example of a Rulebricks usage response.",
                    "value": {
                      "plan": "Business",
                      "monthly_period_start": "04-28-2024",
                      "monthly_period_end": "05-28-2024",
                      "monthly_executions_usage": 42,
                      "monthly_executions_limit": 1000000,
                      "monthly_executions_remaining": 999958
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/values": {
      "post": {
        "summary": "Update or add dynamic values",
        "description": "Update existing dynamic values or add new ones for the authenticated user. Supports both flat and nested object structures. Nested objects are automatically flattened using dot notation and keys are converted to readable format (e.g., 'user_name' becomes 'User Name', nested 'user.contact_info.email' becomes 'User.Contact Info.Email').",
        "tags": ["Values"],
        "operationId": "update",
        "x-fern-sdk-group-name": "values",
        "x-fern-sdk-method-name": "update",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateValuesRequest"
              },
              "examples": {
                "flatValues": {
                  "summary": "Flat values (traditional format)",
                  "description": "Simple key-value pairs",
                  "value": {
                    "values": {
                      "Favorite Color": "blue",
                      "Age": 30,
                      "Is Student": false,
                      "Hobbies": ["reading", "cycling"]
                    },
                    "user_groups": ["marketing", "developers"]
                  }
                },
                "nestedValues": {
                  "summary": "Nested values (automatically flattened)",
                  "description": "Nested objects are automatically flattened using dot notation and keys are converted to readable format",
                  "value": {
                    "values": {
                      "user_profile": {
                        "first_name": "Alice",
                        "last_name": "Johnson",
                        "contact_info": {
                          "email_address": "alice@example.com",
                          "phone_number": "555-0123"
                        }
                      },
                      "account_settings": {
                        "is_premium_user": true,
                        "subscription_tier": "gold",
                        "preferences": ["email_notifications", "sms_alerts"]
                      },
                      "account_balance": 1250.75
                    },
                    "user_groups": ["marketing", "developers"]
                  }
                },
                "mixedValues": {
                  "summary": "Mixed flat and nested values",
                  "description": "Combination of flat keys and nested objects with dot notation",
                  "value": {
                    "values": {
                      "Company Name": "Acme Corp",
                      "company_details": {
                        "founded_year": 2020,
                        "employee_count": 150,
                        "headquarters": {
                          "city": "San Francisco",
                          "state": "CA",
                          "country": "USA"
                        }
                      },
                      "Is Public": false,
                      "tags": ["tech", "startup", "saas"]
                    },
                    "user_groups": ["marketing"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DynamicValueListResponse"
                },
                "examples": {
                  "flatValuesResponse": {
                    "summary": "Response for flat values",
                    "value": [
                      {
                        "id": "I5RzbYI64h",
                        "name": "Favorite Color",
                        "type": "string",
                        "value": "blue",
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "J6SacZJ75i",
                        "name": "Age",
                        "type": "number",
                        "value": 30,
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      }
                    ]
                  },
                  "nestedValuesResponse": {
                    "summary": "Response for nested values (automatically flattened with dot notation)",
                    "description": "Shows how nested input gets flattened with readable key names using dot notation",
                    "value": [
                      {
                        "id": "A1BcdE23f4",
                        "name": "User Profile.First Name",
                        "type": "string",
                        "value": "Alice",
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "B2CdeF34g5",
                        "name": "User Profile.Last Name",
                        "type": "string",
                        "value": "Johnson",
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "C3DefG45h6",
                        "name": "User Profile.Contact Info.Email Address",
                        "type": "string",
                        "value": "alice@example.com",
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "D4EfgH56i7",
                        "name": "User Profile.Contact Info.Phone Number",
                        "type": "string",
                        "value": "555-0123",
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "E5FghI67j8",
                        "name": "Account Settings.Is Premium User",
                        "type": "boolean",
                        "value": true,
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "F6GhiJ78k9",
                        "name": "Account Settings.Subscription Tier",
                        "type": "string",
                        "value": "gold",
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "G7HijK89l0",
                        "name": "Account Settings.Preferences",
                        "type": "list",
                        "value": ["email_notifications", "sms_alerts"],
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      },
                      {
                        "id": "H8IjkL90m1",
                        "name": "Account Balance",
                        "type": "number",
                        "value": 1250.75,
                        "usages": [],
                        "user_groups": ["marketing", "developers"]
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "invalidKey": {
                    "summary": "Invalid key",
                    "value": "Invalid key: invalid-key!. Keys must contain only alphanumeric characters and underscores."
                  },
                  "typeMismatch": {
                    "summary": "Data type mismatch",
                    "value": "Data type mismatch for key: age. Expected type: number, Received type: string."
                  },
                  "exceededLimit": {
                    "summary": "Exceeded key limit",
                    "value": "Exceeding maximum number of keys. Current: 4990, Attempting to add: 15, Maximum allowed: 5000"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "example": "Access denied. You do not have permission to create or update values in the requested access groups."
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "example": "Internal server error. Database connection failed."
              }
            }
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "get": {
        "summary": "List dynamic values",
        "description": "Retrieve all dynamic values for the authenticated user. Use the 'include' parameter to control whether usage information is returned.",
        "tags": ["Values"],
        "operationId": "list",
        "x-fern-sdk-group-name": "values",
        "x-fern-sdk-method-name": "list",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "required": false,
            "description": "Query all dynamic values containing a specific name",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "include",
            "in": "query",
            "required": false,
            "description": "Comma-separated list of additional data to include. Use 'usage' to include which rules reference each value.",
            "schema": {
              "type": "string"
            },
            "example": "usage"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DynamicValueListResponse"
                },
                "examples": {
                  "withoutUsage": {
                    "summary": "Basic response (default)",
                    "description": "Response when no 'include' parameter is specified",
                    "value": [
                      {
                        "id": "abc123",
                        "name": "Favorite Color",
                        "type": "string",
                        "value": "blue",
                        "user_groups": ["marketing"]
                      },
                      {
                        "id": "def456",
                        "name": "Age",
                        "type": "number",
                        "value": 30,
                        "user_groups": ["marketing"]
                      },
                      {
                        "id": "ghi789",
                        "name": "Is Student",
                        "type": "boolean",
                        "value": false,
                        "user_groups": ["marketing"]
                      },
                      {
                        "id": "jkl012",
                        "name": "Hobbies",
                        "type": "list",
                        "value": ["reading", "cycling"],
                        "user_groups": ["marketing"]
                      }
                    ]
                  },
                  "withUsage": {
                    "summary": "Response with usage data",
                    "description": "Response when 'include=usage' parameter is specified",
                    "value": [
                      {
                        "id": "abc123",
                        "name": "Favorite Color",
                        "type": "string",
                        "value": "blue",
                        "usages": [],
                        "user_groups": ["marketing"]
                      },
                      {
                        "id": "def456",
                        "name": "Age",
                        "type": "number",
                        "value": 30,
                        "usages": [],
                        "user_groups": ["marketing"]
                      },
                      {
                        "id": "ghi789",
                        "name": "Is Student",
                        "type": "boolean",
                        "value": false,
                        "usages": [
                          {
                            "id": "2855f8da-2654-4df9-8903-8f797cbfe8eb",
                            "name": "Qualify Leads from HubSpot",
                            "description": "Qualify leads based on incoming HubSpot data.",
                            "slug": "w5Q4zhD_Kp",
                            "published": false,
                            "updated_at": "2024-04-23T23:55:38.348069+00:00"
                          }
                        ],
                        "user_groups": ["marketing"]
                      },
                      {
                        "id": "jkl012",
                        "name": "Hobbies",
                        "type": "list",
                        "value": ["reading", "cycling"],
                        "usages": [
                          {
                            "id": "1a163563-8ef4-4f32-ba62-6242071b58a6",
                            "name": "Returning Customer Discount",
                            "description": "E-commerce discounts & offers for returning customers to our storefront.",
                            "slug": "tJOCd8hdsY",
                            "published": true,
                            "updated_at": "2024-03-22T00:27:41.091777+00:00"
                          }
                        ],
                        "user_groups": ["marketing"]
                      }
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "example": "No values found including name \"nonexistent\""
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "example": "Internal server error. Database connection failed."
              }
            }
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "summary": "Delete a dynamic value",
        "description": "Delete a specific dynamic value for the authenticated user by its ID.",
        "tags": ["Values"],
        "operationId": "delete",
        "x-fern-sdk-group-name": "values",
        "x-fern-sdk-method-name": "delete",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "description": "ID of the dynamic value to delete",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessMessage"
                },
                "example": {
                  "message": "Value \"Favorite Color\" deleted successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "missingId": {
                    "summary": "Missing ID parameter",
                    "value": "Missing value ID. Please provide an ID in the query string."
                  },
                  "valueInUse": {
                    "summary": "Value is in use",
                    "value": "Cannot delete value \"Age\" because it is in use by rule \"Lead Qualification\". Remove this value from the rule before deleting it."
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "examples": {
                  "userNotFound": {
                    "summary": "User not found",
                    "value": "User not found"
                  },
                  "valueNotFound": {
                    "summary": "Value not found",
                    "value": "Value with ID \"abc123\" not found"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "example": "Internal server error. Database connection failed."
              }
            }
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/folders": {
      "get": {
        "summary": "List folders",
        "description": "Retrieve all rule folders for the authenticated user.",
        "tags": ["Assets"],
        "operationId": "listFolders",
        "x-fern-sdk-group-name": ["assets", "folders"],
        "x-fern-sdk-method-name": "list",
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FolderListResponse"
                },
                "example": [
                  {
                    "id": "abc123",
                    "name": "Marketing Rules",
                    "description": "Rules for marketing automation workflows",
                    "updated_at": "2024-04-23T23:55:38.348Z"
                  },
                  {
                    "id": "def456",
                    "name": "Sales Qualification",
                    "description": "Rules for qualifying sales leads",
                    "updated_at": "2024-04-22T18:30:00.000Z"
                  }
                ]
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "summary": "Create or update a rule folder",
        "description": "Create a new rule folder or update an existing one for the authenticated user.",
        "tags": ["Assets"],
        "operationId": "upsertFolder",
        "x-fern-sdk-group-name": ["assets", "folders"],
        "x-fern-sdk-method-name": "upsert",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpsertFolderRequest"
              },
              "example": {
                "name": "Marketing Rules",
                "description": "Rules for marketing automation workflows"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Folder"
                },
                "example": {
                  "id": "abc123",
                  "name": "Marketing Rules",
                  "description": "Rules for marketing automation workflows",
                  "updated_at": "2024-04-23T23:55:38.348Z"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "summary": "Delete a rule folder",
        "description": "Delete a specific rule folder for the authenticated user. This does not delete the rules within the folder.",
        "tags": ["Assets"],
        "operationId": "deleteFolder",
        "x-fern-sdk-group-name": ["assets", "folders"],
        "x-fern-sdk-method-name": "delete",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteFolderRequest"
              },
              "example": {
                "id": "abc123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Folder"
                },
                "example": {
                  "id": "abc123",
                  "name": "Marketing Rules",
                  "description": "Rules for marketing automation workflows",
                  "updated_at": "2024-04-23T23:55:38.348Z"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/contexts": {
      "get": {
        "summary": "List contexts",
        "description": "Retrieve all contexts (entities) for the authenticated user.",
        "tags": ["Contexts"],
        "operationId": "listContexts",
        "x-fern-sdk-group-name": ["contexts", "admin"],
        "x-fern-sdk-method-name": "list",
        "x-fern-examples": [
          {
            "name": "List all contexts",
            "response": {
              "body": []
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextListResponse"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "summary": "Create a context",
        "description": "Create a new context (entity) for the authenticated user.",
        "tags": ["Contexts"],
        "operationId": "createContext",
        "x-fern-sdk-group-name": ["contexts", "admin"],
        "x-fern-sdk-method-name": "create",
        "x-fern-examples": [
          {
            "name": "Create a context",
            "request": {
              "name": "Customer",
              "description": "Represents a customer in the system",
              "schema": [
                {
                  "key": "email",
                  "name": "Email",
                  "type": "string"
                },
                {
                  "key": "age",
                  "name": "Age",
                  "type": "number"
                }
              ]
            },
            "response": {
              "body": {
                "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                "slug": "customer",
                "name": "Customer",
                "created_at": "2024-01-15T10:30:00.000Z"
              }
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateContextRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Context created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateContextResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/contexts/{id}": {
      "get": {
        "summary": "Get a context",
        "description": "Retrieve a specific context by its ID.",
        "tags": ["Contexts"],
        "operationId": "getContext",
        "x-fern-sdk-group-name": ["contexts", "admin"],
        "x-fern-sdk-method-name": "get",
        "x-fern-examples": [
          {
            "name": "Get a context",
            "path-parameters": {
              "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
            },
            "response": {
              "body": {
                "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                "name": "Customer",
                "slug": "customer",
                "description": "Represents a customer in the system",
                "schema": {
                  "base": [
                    {
                      "key": "email",
                      "name": "Email",
                      "type": "string"
                    },
                    {
                      "key": "age",
                      "name": "Age",
                      "type": "number"
                    }
                  ],
                  "derived": []
                },
                "identity_fact": "email",
                "ttl_seconds": 3600,
                "history_limit": 100,
                "on_schema_mismatch": "ignore",
                "auto_execute_decisions": true,
                "bound_rules": [
                  {
                    "id": "rule-5678-90ab-cdef-123456789012",
                    "name": "Customer Pricing Rule",
                    "slug": "pricing-rule",
                    "published": true
                  }
                ],
                "bound_flows": [],
                "relationships": {
                  "outgoing": [],
                  "incoming": []
                },
                "created_at": "2024-01-15T10:30:00.000Z",
                "updated_at": "2024-01-15T10:30:00.000Z"
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextDetail"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "put": {
        "summary": "Update a context",
        "description": "Update an existing context's properties and schema.",
        "tags": ["Contexts"],
        "operationId": "updateContext",
        "x-fern-sdk-group-name": ["contexts", "admin"],
        "x-fern-sdk-method-name": "update",
        "x-fern-examples": [
          {
            "name": "Update a context",
            "path-parameters": {
              "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
            },
            "request": {
              "name": "Updated Customer",
              "description": "Updated description for premium customers"
            },
            "response": {
              "body": {
                "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                "slug": "updated-customer",
                "name": "Updated Customer",
                "updated_at": "2024-01-15T12:00:00.000Z"
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextIdParameter"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateContextRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Context updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateContextResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "summary": "Delete a context",
        "description": "Delete a specific context and all its instances.",
        "tags": ["Contexts"],
        "operationId": "deleteContext",
        "x-fern-sdk-group-name": ["contexts", "admin"],
        "x-fern-sdk-method-name": "delete",
        "x-fern-examples": [
          {
            "name": "Delete a context",
            "path-parameters": {
              "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
            },
            "response": {
              "body": {
                "message": "Context deleted successfully."
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Context deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteContextResponse"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/contexts/{id}/relationships": {
      "get": {
        "summary": "List relationships",
        "description": "List all relationships for a specific context.",
        "tags": ["Contexts"],
        "operationId": "listContextRelationships",
        "x-fern-sdk-group-name": ["contexts", "relationships"],
        "x-fern-sdk-method-name": "list",
        "x-fern-examples": [
          {
            "name": "List relationships",
            "path-parameters": {
              "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
            },
            "response": {
              "body": {
                "outgoing": [],
                "incoming": []
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextRelationshipsResponse"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "summary": "Create a relationship",
        "description": "Create a new relationship between two contexts.",
        "tags": ["Contexts"],
        "operationId": "createContextRelationship",
        "x-fern-sdk-group-name": ["contexts", "relationships"],
        "x-fern-sdk-method-name": "create",
        "x-fern-examples": [
          {
            "name": "Create a relationship",
            "path-parameters": {
              "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
            },
            "request": {
              "targetContextId": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
              "type": "one-to-many",
              "foreignKey": "customer_id",
              "name": "Customer Orders"
            },
            "response": {
              "body": {
                "id": "rel-1234-5678-90ab-cdef12345678",
                "type": "one-to-many",
                "foreignKey": "customer_id",
                "name": "Customer Orders",
                "targetContext": {
                  "id": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
                  "name": "Order",
                  "slug": "order"
                }
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextIdParameter"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRelationshipRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Relationship created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateRelationshipResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/contexts/{id}/relationships/{relationship}": {
      "delete": {
        "summary": "Delete a relationship",
        "description": "Delete a specific relationship between contexts.",
        "tags": ["Contexts"],
        "operationId": "deleteContextRelationship",
        "x-fern-sdk-group-name": ["contexts", "relationships"],
        "x-fern-sdk-method-name": "delete",
        "x-fern-examples": [
          {
            "name": "Delete a relationship",
            "path-parameters": {
              "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "relationship": "c3d4e5f6-a7b8-9012-cdef-123456789012"
            },
            "response": {
              "body": {
                "message": "Relationship deleted successfully."
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextIdParameter"
          },
          {
            "$ref": "#/components/parameters/RelationshipParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Relationship deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteRelationshipResponse"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/contexts/{slug}/{instance}": {
      "get": {
        "summary": "Get context instance state",
        "description": "Retrieve the current state of a context instance.",
        "tags": ["Contexts"],
        "operationId": "getContextInstance",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "getInstance",
        "x-fern-examples": [
          {
            "name": "Get instance state",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345"
            },
            "response": {
              "body": {}
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextInstanceState"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "summary": "Submit data to context instance",
        "description": "Submit data to a context instance, creating it if it doesn't exist. May trigger bound rule/flow evaluations.",
        "tags": ["Contexts"],
        "operationId": "submitContextData",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "submit",
        "x-fern-examples": [
          {
            "name": "Submit data to instance",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345"
            },
            "request": {
              "email": "customer@example.com",
              "age": 30
            },
            "response": {
              "body": {}
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitContextDataRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Data submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubmitContextDataResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "summary": "Delete context instance",
        "description": "Delete a specific context instance and its history.",
        "tags": ["Contexts"],
        "operationId": "deleteContextInstance",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "deleteInstance",
        "x-fern-examples": [
          {
            "name": "Delete instance",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345"
            },
            "response": {
              "body": {
                "message": "Instance deleted successfully."
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Instance deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteContextInstanceResponse"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/contexts/{slug}/{instance}/history": {
      "get": {
        "summary": "Get instance history",
        "description": "Retrieve the change history for a context instance.",
        "tags": ["Contexts"],
        "operationId": "getContextInstanceHistory",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "getHistory",
        "x-fern-examples": [
          {
            "name": "Get instance history",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345"
            },
            "response": {
              "body": {
                "context": "customer:cust-12345",
                "history": {}
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          },
          {
            "name": "field",
            "in": "query",
            "required": false,
            "description": "Filter history to a specific field.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Maximum number of history entries to return.",
            "schema": {
              "type": "integer",
              "default": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextInstanceHistory"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/contexts/{slug}/{instance}/pending": {
      "get": {
        "summary": "Get pending evaluations",
        "description": "Get list of rules/flows that need to be evaluated for this instance.",
        "tags": ["Contexts"],
        "operationId": "getContextInstancePending",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "getPending",
        "x-fern-examples": [
          {
            "name": "Get pending evaluations",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345"
            },
            "response": {
              "body": {
                "pending": []
              }
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextInstancePendingResponse"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/contexts/{slug}/{instance}/solve/{ruleSlug}": {
      "post": {
        "summary": "Solve a rule against context instance",
        "description": "Execute a specific rule using the context instance's state as input.",
        "tags": ["Contexts"],
        "operationId": "solveContextRule",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "solve",
        "x-fern-examples": [
          {
            "name": "Solve rule against instance",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345",
              "ruleSlug": "eligibility-check"
            },
            "request": {},
            "response": {
              "body": {}
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          },
          {
            "$ref": "#/components/parameters/RuleSlugParameter"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SolveContextRuleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rule executed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SolveContextRuleResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/contexts/{slug}/{instance}/cascade": {
      "post": {
        "summary": "Trigger cascade re-evaluation",
        "description": "Trigger re-evaluation of all bound rules and flows for the instance.",
        "tags": ["Contexts"],
        "operationId": "cascadeContextInstance",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "cascade",
        "x-fern-examples": [
          {
            "name": "Cascade instance evaluations",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345"
            },
            "request": {},
            "response": {
              "body": {}
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CascadeContextRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cascade completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CascadeContextResponse"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/contexts/{slug}/{instance}/flows/{flowSlug}": {
      "post": {
        "summary": "Execute a flow against context instance",
        "description": "Execute a specific flow using the context instance's state as input.",
        "tags": ["Contexts"],
        "operationId": "executeContextFlow",
        "x-fern-sdk-group-name": "contexts",
        "x-fern-sdk-method-name": "execute",
        "x-fern-examples": [
          {
            "name": "Execute flow against instance",
            "path-parameters": {
              "slug": "customer",
              "instance": "cust-12345",
              "flowSlug": "onboarding-flow"
            },
            "request": {},
            "response": {
              "body": {}
            }
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/ContextSlugParameter"
          },
          {
            "$ref": "#/components/parameters/ContextInstanceParameter"
          },
          {
            "$ref": "#/components/parameters/FlowSlugParameter"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SolveContextFlowRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Flow executed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SolveContextFlowResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/import": {
      "post": {
        "summary": "Import assets from manifest",
        "description": "Import rules, flows, contexts, and values from an RBM manifest file.",
        "tags": ["Assets"],
        "operationId": "importManifest",
        "x-fern-sdk-group-name": "assets",
        "x-fern-sdk-method-name": "import",
        "x-fern-examples": [
          {
            "name": "Import manifest",
            "request": {
              "manifest": {
                "version": "1.0",
                "rules": [
                  {
                    "name": "Pricing Rule",
                    "slug": "pricing-rule"
                  }
                ],
                "flows": [
                  {
                    "name": "Onboarding Flow",
                    "slug": "onboarding-flow"
                  }
                ],
                "contexts": [
                  {
                    "name": "Customer",
                    "slug": "customer"
                  }
                ],
                "values": [
                  {
                    "key": "tax_rate",
                    "value": 0.08
                  }
                ]
              },
              "overwrite": false
            },
            "response": {
              "body": {}
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImportManifestRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Import completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportManifestResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    "/admin/export": {
      "post": {
        "summary": "Export assets to manifest",
        "description": "Export selected rules, flows, contexts, and values to an RBM manifest file.",
        "tags": ["Assets"],
        "operationId": "exportManifest",
        "x-fern-sdk-group-name": "assets",
        "x-fern-sdk-method-name": "export",
        "x-fern-examples": [
          {
            "name": "Export assets",
            "request": {
              "rules": ["pricing-rule", "eligibility-check"],
              "flows": ["onboarding-flow"],
              "contexts": ["customer"],
              "values": ["tax_rate", "discount_threshold"]
            },
            "response": {
              "body": {}
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExportManifestRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Export completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/ExportManifestResponse"
                    },
                    {
                      "$ref": "#/components/schemas/ExportManifestPreviewResponse"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    }
  },
  "components": {
    "parameters": {
      "SlugParameter": {
        "name": "slug",
        "in": "path",
        "required": true,
        "description": "The unique identifier for the resource.",
        "schema": {
          "type": "string"
        }
      },
      "TestIdParameter": {
        "name": "testId",
        "in": "path",
        "required": true,
        "description": "The ID of the test.",
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "ContextIdParameter": {
        "name": "id",
        "in": "path",
        "required": true,
        "description": "The unique identifier for the context.",
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "ContextSlugParameter": {
        "name": "slug",
        "in": "path",
        "required": true,
        "description": "The unique slug for the context.",
        "schema": {
          "type": "string"
        }
      },
      "ContextInstanceParameter": {
        "name": "instance",
        "in": "path",
        "required": true,
        "description": "The unique identifier for the context instance.",
        "schema": {
          "type": "string"
        }
      },
      "RelationshipParameter": {
        "name": "relationship",
        "in": "path",
        "required": true,
        "description": "The unique identifier for the relationship.",
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "RuleSlugParameter": {
        "name": "ruleSlug",
        "in": "path",
        "required": true,
        "description": "The unique slug for the rule.",
        "schema": {
          "type": "string"
        }
      },
      "FlowSlugParameter": {
        "name": "flowSlug",
        "in": "path",
        "required": true,
        "description": "The unique slug for the flow.",
        "schema": {
          "type": "string"
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "examples": {
              "genericError": {
                "summary": "Generic error",
                "value": {
                  "error": "Invalid request parameters or body"
                }
              },
              "missingBody": {
                "summary": "Missing request body",
                "value": {
                  "error": "Missing request body. Please provide input data for rule evaluation."
                }
              },
              "bulkSolveNotSupported": {
                "summary": "Bulk solve not supported",
                "value": {
                  "error": "Bulk solve is not supported on this endpoint. Use the separate /bulk-solve/:slug endpoint to handle multiple payloads."
                }
              },
              "invalidBulkRequest": {
                "summary": "Invalid bulk request",
                "value": {
                  "error": "Invalid bulk request. Expected an array of request objects with a maximum of 1000 items."
                }
              },
              "missingValueId": {
                "summary": "Missing value ID",
                "value": {
                  "error": "Missing value ID. Please provide an ID in the query string."
                }
              },
              "exceedingKeysLimit": {
                "summary": "Exceeding maximum keys",
                "value": {
                  "error": "Exceeding maximum number of keys. Current: 4990, Attempting to add: 15, Maximum allowed: 5000"
                }
              },
              "valueTooLarge": {
                "summary": "Value too large",
                "value": {
                  "error": "Value for key \"example\" is too large. Values must be < 5000 characters when serialized."
                }
              },
              "typeMismatch": {
                "summary": "Type mismatch",
                "value": {
                  "error": "Data type mismatch for key: age. Expected type: number, Received type: string."
                }
              },
              "invalidRule": {
                "summary": "Invalid rule reference",
                "value": {
                  "error": "Invalid rule or flow reference in parallel solve request."
                }
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "examples": {
              "ruleNotFound": {
                "summary": "Rule not found",
                "value": {
                  "error": "Rule with slug \"example-slug\" not found. Please provide a valid rule slug."
                }
              },
              "flowNotFound": {
                "summary": "Flow not found",
                "value": {
                  "error": "Flow with slug \"example-slug\" not found. Please provide a valid flow slug."
                }
              },
              "testNotFound": {
                "summary": "Test not found",
                "value": {
                  "error": "Test with id \"test-id\" not found."
                }
              },
              "valueNotFound": {
                "summary": "Value not found",
                "value": {
                  "error": "Value with ID \"value-id\" not found"
                }
              },
              "userNotFound": {
                "summary": "User not found",
                "value": {
                  "error": "User not found"
                }
              }
            }
          }
        }
      },
      "InternalServerError": {
        "description": "Internal server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Internal server error. Please try again later or contact support if the issue persists."
            }
          }
        }
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          }
        }
      },
      "SuccessMessage": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message"
          }
        }
      },
      "RuleBase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "The unique identifier for the rule."
          },
          "name": {
            "type": "string",
            "description": "The name of the rule."
          },
          "description": {
            "type": "string",
            "description": "The description of the rule."
          },
          "slug": {
            "type": "string",
            "description": "The unique slug for the rule used in API requests."
          }
        }
      },
      "RuleDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/RuleBase"
          },
          {
            "type": "object",
            "properties": {
              "created_at": {
                "type": "string",
                "format": "date-time",
                "description": "The date this rule was created."
              },
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "description": "The date this rule was last updated."
              },
              "folder": {
                "$ref": "#/components/schemas/Folder"
              },
              "context": {
                "type": "object",
                "nullable": true,
                "description": "The context this rule is bound to (if any). Rules bound to a context have their inputs/outputs mapped to context fields.",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "The context ID."
                  },
                  "name": {
                    "type": "string",
                    "description": "The context name."
                  },
                  "slug": {
                    "type": "string",
                    "description": "The context slug."
                  }
                }
              },
              "request_schema": {
                "type": "array",
                "description": "The published request schema for the rule.",
                "items": {
                  "$ref": "#/components/schemas/SchemaField"
                }
              },
              "response_schema": {
                "type": "array",
                "description": "The published response schema for the rule.",
                "items": {
                  "$ref": "#/components/schemas/SchemaField"
                }
              }
            }
          }
        ]
      },
      "RuleListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/RuleDetail"
        }
      },
      "SchemaField": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "The unique key for this field."
          },
          "show": {
            "type": "boolean",
            "description": "Whether this field is visible in the UI."
          },
          "name": {
            "type": "string",
            "description": "Display name for this field."
          },
          "description": {
            "type": "string",
            "description": "Description of this field."
          },
          "type": {
            "type": "string",
            "enum": ["string", "number", "boolean", "object", "array"],
            "description": "Data type of this field."
          },
          "defaultValue": {
            "description": "Default value for this field.",
            "nullable": true,
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "boolean"
              },
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "array",
                "items": {}
              }
            ]
          },
          "defaultComputedValue": {
            "type": "string",
            "nullable": true,
            "description": "Computed default value for this field."
          },
          "transform": {
            "type": "string",
            "description": "Transformation expression to apply to this field."
          }
        }
      },
      "RuleExport": {
        "type": "object",
        "description": "The exported rule object containing all rule definition data.",
        "additionalProperties": true
      },
      "DeleteRuleRequest": {
        "type": "object",
        "required": ["id"],
        "properties": {
          "id": {
            "type": "string",
            "description": "The ID of the rule to delete."
          }
        }
      },
      "ImportRuleRequest": {
        "type": "object",
        "required": ["rule"],
        "properties": {
          "rule": {
            "type": "object",
            "description": "The rule data to import.",
            "additionalProperties": true
          }
        }
      },
      "FlowBase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "The unique identifier for the flow."
          },
          "name": {
            "type": "string",
            "description": "The name of the flow."
          },
          "description": {
            "type": "string",
            "description": "The description of the flow."
          },
          "slug": {
            "type": "string",
            "description": "The unique slug for the flow used in API requests."
          }
        }
      },
      "FlowExecutionError": {
        "type": "object",
        "description": "Error response when flow execution fails",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message describing what went wrong during flow execution"
          },
          "node": {
            "type": "string",
            "description": "Identifier of the node where the error occurred (if applicable)"
          },
          "details": {
            "type": "object",
            "description": "Additional error details",
            "additionalProperties": true
          }
        }
      },
      "FlowDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/FlowBase"
          },
          {
            "type": "object",
            "properties": {
              "published": {
                "type": "boolean",
                "description": "Whether the flow is published."
              },
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "description": "The date this flow was last updated."
              },
              "origin_rule": {
                "type": "object",
                "nullable": true,
                "description": "The origin rule that this flow starts from. Flows execute starting from this rule's outputs.",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "The origin rule ID."
                  },
                  "name": {
                    "type": "string",
                    "description": "The origin rule name."
                  },
                  "slug": {
                    "type": "string",
                    "description": "The origin rule slug."
                  }
                }
              },
              "context": {
                "type": "object",
                "nullable": true,
                "description": "The context this flow is bound to (via its origin rule). Flows inherit context binding from their origin rule.",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "The context ID."
                  },
                  "name": {
                    "type": "string",
                    "description": "The context name."
                  },
                  "slug": {
                    "type": "string",
                    "description": "The context slug."
                  }
                }
              }
            }
          }
        ]
      },
      "FlowListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/FlowDetail"
        }
      },
      "Folder": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the folder."
          },
          "name": {
            "type": "string",
            "description": "Name of the folder."
          },
          "description": {
            "type": "string",
            "description": "Description of the folder."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of when the folder was last updated."
          }
        }
      },
      "FolderListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Folder"
        }
      },
      "UpsertFolderRequest": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Folder ID (required for updates, omit for creation)"
          },
          "name": {
            "type": "string",
            "description": "Name of the folder"
          },
          "description": {
            "type": "string",
            "description": "Description of the folder"
          }
        }
      },
      "DeleteFolderRequest": {
        "type": "object",
        "required": ["id"],
        "properties": {
          "id": {
            "type": "string",
            "description": "ID of the folder to delete"
          }
        }
      },
      "Test": {
        "type": "object",
        "required": [
          "id",
          "name",
          "request",
          "response",
          "critical",
          "error",
          "success"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the test."
          },
          "name": {
            "type": "string",
            "description": "The name of the test."
          },
          "request": {
            "type": "object",
            "description": "The request object for the test.",
            "additionalProperties": true
          },
          "response": {
            "type": "object",
            "description": "The expected response object for the test.",
            "additionalProperties": true
          },
          "critical": {
            "type": "boolean",
            "description": "Indicates whether the test is critical."
          },
          "error": {
            "type": "boolean",
            "description": "Indicates if the test resulted in an error."
          },
          "success": {
            "type": "boolean",
            "description": "Indicates if the test was successful."
          },
          "testState": {
            "type": "object",
            "nullable": true,
            "description": "The state of the test after execution.",
            "properties": {
              "duration": {
                "type": "number",
                "description": "Execution time in seconds"
              },
              "response": {
                "type": "object",
                "nullable": true,
                "description": "Actual response returned",
                "additionalProperties": true
              },
              "conditions": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": true
                }
              },
              "httpStatus": {
                "type": "integer",
                "description": "HTTP status code returned"
              },
              "successIdxs": {
                "type": "array",
                "items": {
                  "type": "integer"
                }
              },
              "evaluationError": {
                "oneOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "string"
                  }
                ],
                "description": "Error message or flag indicating if evaluation error occurred"
              }
            }
          },
          "lastExecuted": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "The timestamp when the test was last executed."
          }
        }
      },
      "TestListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Test"
        }
      },
      "CreateTestRequest": {
        "type": "object",
        "required": ["name", "request", "response", "critical"],
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the test."
          },
          "request": {
            "type": "object",
            "description": "The request object for the test.",
            "additionalProperties": true
          },
          "response": {
            "type": "object",
            "description": "The expected response object for the test.",
            "additionalProperties": true
          },
          "critical": {
            "type": "boolean",
            "description": "Indicates whether the test is critical."
          }
        }
      },
      "UserInviteRequest": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email of the user to invite."
          },
          "role": {
            "type": "string",
            "description": "System or custom role ID to assign to the user. Available system roles include 'admin', 'editor', and 'developer'.",
            "enum": ["admin", "editor", "developer", "custom-role"]
          },
          "user_groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of user group names or IDs to assign to the user. All specified groups must exist in your organization."
          }
        }
      },
      "UserInviteResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message indicating whether a new user was invited or an existing user's permissions were updated."
          },
          "user": {
            "type": "object",
            "properties": {
              "email": {
                "type": "string",
                "format": "email",
                "description": "Email of the invited user."
              },
              "role": {
                "type": "string",
                "description": "Role assigned to the user."
              },
              "user_groups": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "User groups assigned to the user."
              }
            }
          }
        }
      },
      "UserGroup": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the user group."
          },
          "name": {
            "type": "string",
            "description": "Name of the user group."
          },
          "description": {
            "type": "string",
            "description": "Description of the user group."
          },
          "members": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "email"
            },
            "description": "List of member emails in the user group."
          }
        }
      },
      "UserGroupListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/UserGroup"
        }
      },
      "CreateUserGroupRequest": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Unique name of the user group.",
            "maxLength": 50
          },
          "description": {
            "type": "string",
            "description": "Description of the user group."
          }
        }
      },
      "UserDetail": {
        "type": "object",
        "description": "Detailed information about a user in the organization.",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the user."
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address of the user."
          },
          "name": {
            "type": "string",
            "nullable": true,
            "description": "Display name of the user (if set)."
          },
          "api_key": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "description": "API key assigned to the user."
          },
          "role": {
            "type": "string",
            "description": "Role assigned to the user (e.g., 'administrator', 'developer', 'editor', or custom role ID)."
          },
          "user_groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of user group names the user belongs to."
          },
          "joined_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Date and time when the user joined the organization."
          }
        }
      },
      "UserListResponse": {
        "type": "array",
        "description": "List of users in the organization.",
        "items": {
          "$ref": "#/components/schemas/UserDetail"
        }
      },
      "CreateUserRequest": {
        "type": "object",
        "required": ["email", "password"],
        "description": "Request body for creating a new user.",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address for the new user."
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "Password for the new user (minimum 8 characters). The user can log in immediately with this password."
          },
          "name": {
            "type": "string",
            "description": "Display name for the user."
          },
          "role": {
            "type": "string",
            "description": "Role to assign to the user. Defaults to 'developer' if not specified.",
            "default": "developer"
          },
          "user_groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of user group names or IDs to assign to the user."
          }
        }
      },
      "CreateUserResponse": {
        "type": "object",
        "description": "Response after successfully creating a user.",
        "properties": {
          "status": {
            "type": "string",
            "description": "Status of the operation.",
            "example": "success"
          },
          "message": {
            "type": "string",
            "description": "Success message."
          },
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid",
                "description": "Unique identifier for the created user."
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Email address of the created user."
              },
              "name": {
                "type": "string",
                "nullable": true,
                "description": "Display name of the user."
              },
              "role": {
                "type": "string",
                "description": "Role assigned to the user."
              },
              "user_groups": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "User groups assigned to the user."
              },
              "api_key": {
                "type": "string",
                "format": "uuid",
                "nullable": true,
                "description": "API key generated for the user."
              }
            }
          }
        }
      },
      "DecisionLog": {
        "type": "object",
        "description": "Rule/flow execution log entry with request, response, and decision details.",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "When the rule/flow was executed."
          },
          "name": {
            "type": "string",
            "nullable": true,
            "description": "Name of the rule or flow that was executed."
          },
          "endpoint": {
            "type": "string",
            "nullable": true,
            "description": "API endpoint that was called."
          },
          "status": {
            "type": "integer",
            "nullable": true,
            "description": "HTTP status code of the response."
          },
          "request": {
            "type": "object",
            "nullable": true,
            "description": "The request payload sent to the rule/flow.",
            "additionalProperties": true
          },
          "response": {
            "type": "object",
            "nullable": true,
            "description": "The response payload returned by the rule/flow.",
            "additionalProperties": true
          },
          "decision": {
            "type": "object",
            "nullable": true,
            "description": "Decision details including matched conditions, rows, and evaluation metadata.",
            "additionalProperties": true
          },
          "error": {
            "type": "string",
            "nullable": true,
            "description": "Error message if the execution failed."
          },
          "abbreviated": {
            "type": "boolean",
            "description": "Whether the request/response data was truncated due to size limits.",
            "default": false
          }
        }
      },
      "DecisionLogResponse": {
        "type": "object",
        "description": "Response containing decision logs or a count.",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DecisionLog"
            },
            "description": "Array of decision log entries (omitted when count=true)."
          },
          "cursor": {
            "type": "string",
            "nullable": true,
            "description": "Pagination cursor for fetching the next page. Null if no more results."
          },
          "count": {
            "type": "integer",
            "description": "Total count of matching logs (only present when count=true parameter is used)."
          }
        }
      },
      "UsageStatistics": {
        "type": "object",
        "properties": {
          "plan": {
            "type": "string",
            "description": "The current plan of the organization."
          },
          "monthly_period_start": {
            "type": "string",
            "description": "The start date of the current monthly period."
          },
          "monthly_period_end": {
            "type": "string",
            "description": "The end date of the current monthly period."
          },
          "monthly_executions_usage": {
            "type": "number",
            "description": "The number of rule executions used this month."
          },
          "monthly_executions_limit": {
            "type": "number",
            "description": "The total number of rule executions allowed this month."
          },
          "monthly_executions_remaining": {
            "type": "number",
            "description": "The number of rule executions remaining this month."
          }
        }
      },
      "DynamicValue": {
        "type": "object",
        "required": ["id", "name", "type"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the dynamic value."
          },
          "name": {
            "type": "string",
            "description": "Name of the dynamic value (may include dot notation for nested properties)."
          },
          "type": {
            "type": "string",
            "description": "Type identifier for the value (e.g., 'string', 'number', 'boolean', 'list', 'function', etc.)",
            "examples": ["string", "number", "boolean", "list", "function"]
          },
          "value": {
            "description": "The actual value - can be any valid JSON type",
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "boolean"
              },
              {
                "type": "array",
                "items": {}
              },
              {
                "type": "object",
                "additionalProperties": true
              }
            ]
          },
          "usages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RuleUsage"
            },
            "description": "Rules that use this dynamic value (only included when 'include=usage' parameter is used)."
          },
          "user_groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "User groups assigned to this value."
          }
        }
      },
      "DynamicValueListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/DynamicValue"
        }
      },
      "RuleUsage": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "The unique identifier for the rule."
          },
          "name": {
            "type": "string",
            "description": "The name of the rule."
          },
          "description": {
            "type": "string",
            "description": "The description of the rule."
          },
          "slug": {
            "type": "string",
            "description": "The unique slug for the rule used in API requests."
          },
          "published": {
            "type": "boolean",
            "description": "Whether the rule is published."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "The date this rule was last updated."
          }
        }
      },
      "UpdateValuesRequest": {
        "type": "object",
        "required": ["values"],
        "properties": {
          "values": {
            "type": "object",
            "description": "A dictionary of keys and values to update or add. Supports both flat key-value pairs and nested objects. Nested objects will be automatically flattened using dot notation with readable key names (e.g., 'user.contact_info.email' becomes 'User.Contact Info.Email').",
            "additionalProperties": true
          },
          "user_groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional array of access group names or IDs. If omitted and user belongs to access groups, values will be assigned to all user's access groups. Required if values should be restricted to specific access groups."
          }
        }
      },
      "ValueLimits": {
        "type": "object",
        "description": "System limits for dynamic values",
        "properties": {
          "MAX_KEYS": {
            "type": "integer",
            "description": "Maximum number of value keys per user",
            "default": 5000
          },
          "MAX_VALUE_LENGTH": {
            "type": "integer",
            "description": "Maximum length of a single value in characters",
            "default": 5000
          },
          "MAX_TOTAL_SIZE": {
            "type": "integer",
            "description": "Maximum total size of all values in bytes",
            "default": 1048576
          },
          "MAX_KEY_LENGTH": {
            "type": "integer",
            "description": "Maximum length of a key name",
            "default": 100
          }
        }
      },
      "DynamicRequestPayload": {
        "type": "object",
        "description": "Dynamic request payload for rule execution. Structure depends on rule configuration.",
        "additionalProperties": true
      },
      "DynamicResponsePayload": {
        "type": "object",
        "description": "Dynamic response payload from rule execution. Structure depends on rule configuration.",
        "additionalProperties": true
      },
      "BulkRuleResponseItem": {
        "type": "object",
        "description": "Individual response item from a bulk rule execution",
        "oneOf": [
          {
            "$ref": "#/components/schemas/DynamicResponsePayload"
          },
          {
            "type": "object",
            "properties": {
              "error": {
                "type": "string",
                "description": "Error message if this specific item failed to process"
              }
            }
          }
        ]
      },
      "ParallelSolveRequest": {
        "type": "object",
        "description": "A request containing multiple rule/flow executions to be run in parallel.",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "$rule": {
              "type": "string",
              "description": "Slug of the rule to execute"
            },
            "$flow": {
              "type": "string",
              "description": "Slug of the flow to execute"
            }
          },
          "additionalProperties": true
        }
      },
      "ParallelSolveResponse": {
        "type": "object",
        "description": "Response from parallel rule/flow execution with results from each execution.",
        "additionalProperties": {
          "$ref": "#/components/schemas/DynamicResponsePayload"
        }
      },
      "ContextSchemaField": {
        "type": "object",
        "description": "A field definition within a context schema.",
        "properties": {
          "key": {
            "type": "string",
            "description": "The unique key for this field."
          },
          "name": {
            "type": "string",
            "description": "Display name for this field."
          },
          "description": {
            "type": "string",
            "description": "Description of this field."
          },
          "type": {
            "type": "string",
            "enum": ["string", "number", "boolean", "date", "list", "function"],
            "description": "Data type of this field. 'function' type fields compute values dynamically."
          },
          "defaultValue": {
            "description": "Default value for this field.",
            "nullable": true
          },
          "derived": {
            "type": "boolean",
            "description": "Whether this field is derived from rule/flow outputs."
          },
          "sourceRule": {
            "type": "string",
            "nullable": true,
            "description": "The rule ID that derives this field (if derived)."
          },
          "sourceFlow": {
            "type": "string",
            "nullable": true,
            "description": "The flow ID that derives this field (if derived)."
          },
          "sourceField": {
            "type": "string",
            "nullable": true,
            "description": "The source field key in the rule/flow output."
          }
        }
      },
      "ContextSchema": {
        "type": "object",
        "description": "The schema definition for a context.",
        "properties": {
          "base": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContextSchemaField"
            },
            "description": "User-defined base fields for the context."
          },
          "derived": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContextSchemaField"
            },
            "description": "Fields derived from bound rule/flow outputs."
          }
        }
      },
      "ContextBase": {
        "type": "object",
        "description": "Base properties for a context.",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "The unique identifier for the context."
          },
          "name": {
            "type": "string",
            "description": "The name of the context."
          },
          "slug": {
            "type": "string",
            "description": "The unique slug for the context used in API requests."
          },
          "description": {
            "type": "string",
            "description": "The description of the context."
          },
          "auto_execute_decisions": {
            "type": "boolean",
            "default": true,
            "description": "When true, bound rules and flows automatically execute when their inputs are satisfied. When false, users must manually call /solve or /flows endpoints."
          },
          "ttl_seconds": {
            "type": "integer",
            "nullable": true,
            "description": "Time-to-live in seconds for live context instances. Instances expire after this duration."
          },
          "history_limit": {
            "type": "integer",
            "default": 100,
            "description": "Maximum number of history entries to retain per field."
          },
          "on_schema_mismatch": {
            "type": "string",
            "enum": ["ignore", "reject"],
            "default": "ignore",
            "description": "How to handle fields that don't match the schema: 'ignore' filters them out, 'reject' returns an error."
          },
          "webhook_on_solve": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "Webhook URL called when a rule or flow successfully solves for a live context."
          },
          "webhook_on_expire": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "Webhook URL called when a live context expires due to TTL."
          }
        }
      },
      "ContextDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ContextBase"
          },
          {
            "type": "object",
            "properties": {
              "schema": {
                "$ref": "#/components/schemas/ContextSchema"
              },
              "identity_fact": {
                "type": "string",
                "nullable": true,
                "description": "The field key used as the unique identifier for instances."
              },
              "user_groups": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "nullable": true,
                "description": "User groups that can interact with this context."
              },
              "folder": {
                "type": "object",
                "nullable": true,
                "description": "Folder/tag this context belongs to.",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                }
              },
              "bound_rules": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "slug": {
                      "type": "string"
                    },
                    "published": {
                      "type": "boolean"
                    }
                  }
                },
                "description": "Rules bound to this context."
              },
              "bound_flows": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "slug": {
                      "type": "string"
                    },
                    "published": {
                      "type": "boolean"
                    },
                    "origin_rule": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "slug": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "description": "Flows bound to this context (via their origin rule)."
              },
              "relationships": {
                "type": "object",
                "properties": {
                  "outgoing": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/ContextRelationshipOutgoing"
                    }
                  },
                  "incoming": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/ContextRelationshipIncoming"
                    }
                  }
                }
              },
              "created_at": {
                "type": "string",
                "format": "date-time",
                "description": "When the context was created."
              },
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "description": "When the context was last updated."
              }
            }
          }
        ]
      },
      "ContextListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/ContextDetail"
        }
      },
      "CreateContextRequest": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the context."
          },
          "slug": {
            "type": "string",
            "description": "Optional custom slug. Auto-generated if not provided."
          },
          "description": {
            "type": "string",
            "description": "The description of the context."
          },
          "schema": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "key": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "type": {
                  "type": "string"
                },
                "defaultValue": {}
              }
            },
            "description": "Initial schema fields for the context."
          },
          "auto_execute_decisions": {
            "type": "boolean",
            "default": true,
            "description": "When true (default), bound rules and flows automatically execute when their inputs are satisfied."
          },
          "ttl_seconds": {
            "type": "integer",
            "nullable": true,
            "description": "Time-to-live in seconds for live context instances. Instances expire after this duration."
          },
          "history_limit": {
            "type": "integer",
            "default": 100,
            "description": "Maximum number of history entries to retain per field."
          },
          "on_schema_mismatch": {
            "type": "string",
            "enum": ["ignore", "reject"],
            "default": "ignore",
            "description": "How to handle fields that don't match the schema."
          },
          "webhook_on_solve": {
            "type": "string",
            "format": "uri",
            "description": "Webhook URL called when a rule or flow successfully solves."
          },
          "webhook_on_expire": {
            "type": "string",
            "format": "uri",
            "description": "Webhook URL called when a live context expires due to TTL."
          }
        }
      },
      "CreateContextResponse": {
        "$ref": "#/components/schemas/ContextDetail"
      },
      "UpdateContextRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the context."
          },
          "slug": {
            "type": "string",
            "description": "The slug of the context."
          },
          "description": {
            "type": "string",
            "description": "The description of the context."
          },
          "schema": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "key": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "type": {
                  "type": "string"
                },
                "defaultValue": {}
              }
            },
            "description": "Updated schema fields for the context."
          },
          "auto_execute_decisions": {
            "type": "boolean",
            "description": "When true, bound rules and flows automatically execute when their inputs are satisfied."
          },
          "ttl_seconds": {
            "type": "integer",
            "nullable": true,
            "description": "Time-to-live in seconds for live context instances. Instances expire after this duration."
          },
          "history_limit": {
            "type": "integer",
            "description": "Maximum number of history entries to retain per field."
          },
          "on_schema_mismatch": {
            "type": "string",
            "enum": ["ignore", "reject"],
            "description": "How to handle fields that don't match the schema."
          },
          "webhook_on_solve": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "Webhook URL called when a rule or flow successfully solves."
          },
          "webhook_on_expire": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "Webhook URL called when a live context expires due to TTL."
          }
        }
      },
      "UpdateContextResponse": {
        "$ref": "#/components/schemas/ContextDetail"
      },
      "DeleteContextResponse": {
        "type": "object",
        "description": "Response after deleting a context.",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message.",
            "example": "Context deleted"
          },
          "unbound_rules": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Slugs of rules that were unbound from the deleted context."
          },
          "unbound_flows": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Slugs of flows that were unbound from the deleted context."
          },
          "pending_evaluations_cancelled": {
            "type": "integer",
            "description": "Number of pending evaluations that were cancelled when the context was deleted."
          }
        }
      },
      "ContextRelationshipBase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "The unique identifier for the relationship."
          },
          "type": {
            "type": "string",
            "enum": ["one-to-one", "one-to-many", "many-to-one"],
            "description": "The type of relationship."
          },
          "foreignKey": {
            "type": "string",
            "description": "The field key used as the foreign key."
          },
          "name": {
            "type": "string",
            "description": "Display name for the relationship."
          },
          "description": {
            "type": "string",
            "description": "Description of the relationship."
          }
        }
      },
      "ContextRelationshipOutgoing": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ContextRelationshipBase"
          },
          {
            "type": "object",
            "properties": {
              "targetContext": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "slug": {
                    "type": "string"
                  }
                }
              }
            }
          }
        ]
      },
      "ContextRelationshipIncoming": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ContextRelationshipBase"
          },
          {
            "type": "object",
            "properties": {
              "sourceContext": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "slug": {
                    "type": "string"
                  }
                }
              }
            }
          }
        ]
      },
      "ContextRelationshipsResponse": {
        "type": "object",
        "properties": {
          "outgoing": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContextRelationshipOutgoing"
            }
          },
          "incoming": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContextRelationshipIncoming"
            }
          }
        }
      },
      "CreateRelationshipRequest": {
        "type": "object",
        "required": ["targetContextId", "type", "foreignKey"],
        "properties": {
          "targetContextId": {
            "type": "string",
            "format": "uuid",
            "description": "The ID of the target context."
          },
          "type": {
            "type": "string",
            "enum": ["one-to-one", "one-to-many", "many-to-one"],
            "description": "The type of relationship."
          },
          "foreignKey": {
            "type": "string",
            "description": "The field key to use as the foreign key."
          },
          "name": {
            "type": "string",
            "description": "Display name for the relationship."
          },
          "description": {
            "type": "string",
            "description": "Description of the relationship."
          }
        }
      },
      "CreateRelationshipResponse": {
        "$ref": "#/components/schemas/ContextRelationshipOutgoing"
      },
      "DeleteRelationshipResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message."
          }
        }
      },
      "ContextInstanceState": {
        "type": "object",
        "description": "The current state of a context instance.",
        "properties": {
          "context": {
            "type": "string",
            "description": "Combined identifier in format 'contextSlug:instanceId'.",
            "example": "customer:cust-12345"
          },
          "state": {
            "type": "object",
            "description": "The current base field values for this instance.",
            "additionalProperties": true
          },
          "derived": {
            "type": "object",
            "description": "Computed/derived field values from bound rules.",
            "additionalProperties": true
          },
          "status": {
            "type": "string",
            "enum": ["complete", "pending"],
            "description": "Whether all required fields are present ('complete') or some are missing ('pending')."
          },
          "have": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of field keys that are currently populated."
          },
          "need": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of required field keys that are missing (empty when status is 'complete')."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the instance was first created."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the instance was last updated."
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "When the instance will expire based on context TTL."
          }
        }
      },
      "ContextInstanceHistoryEntry": {
        "type": "object",
        "description": "A single history entry for a field value.",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "When this value was recorded."
          },
          "value": {
            "description": "The field value at this point in time."
          }
        }
      },
      "ContextInstanceHistory": {
        "type": "object",
        "description": "Historical values for context instance fields.",
        "properties": {
          "context": {
            "type": "string",
            "description": "Combined identifier in format 'contextSlug:instanceId'."
          },
          "history": {
            "type": "object",
            "description": "Map of field keys to arrays of historical values, newest first.",
            "additionalProperties": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/ContextInstanceHistoryEntry"
              }
            }
          }
        }
      },
      "ContextInstancePendingEvaluation": {
        "type": "object",
        "description": "A pending rule or flow evaluation awaiting data.",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["rule", "flow"],
            "description": "Whether this is a rule or flow evaluation."
          },
          "rule": {
            "type": "string",
            "nullable": true,
            "description": "The rule slug (if type is 'rule')."
          },
          "rule_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "description": "The rule ID (if type is 'rule')."
          },
          "flow": {
            "type": "string",
            "nullable": true,
            "description": "The flow slug (if type is 'flow')."
          },
          "flow_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "description": "The flow ID (if type is 'flow')."
          },
          "waiting_on": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of field keys this evaluation is waiting for."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this pending evaluation was registered."
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this pending evaluation will expire."
          }
        }
      },
      "ContextInstancePendingResponse": {
        "type": "object",
        "description": "List of pending evaluations for a context instance.",
        "properties": {
          "pending": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContextInstancePendingEvaluation"
            },
            "description": "Pending rule and flow evaluations."
          }
        }
      },
      "SubmitContextDataRequest": {
        "type": "object",
        "description": "Data to submit to a context instance. Keys should match the context schema fields.",
        "additionalProperties": true
      },
      "SubmitContextDataResponse": {
        "type": "object",
        "description": "Response after submitting data, including any auto-executed evaluations.",
        "properties": {
          "context": {
            "type": "string",
            "description": "Combined identifier in format 'contextSlug:instanceId'.",
            "example": "customer:cust-12345"
          },
          "state": {
            "type": "object",
            "description": "The merged state after submitting data and any auto-executed rules/flows.",
            "additionalProperties": true
          },
          "status": {
            "type": "string",
            "enum": ["complete", "pending"],
            "description": "Whether all required fields are present ('complete') or some are missing ('pending')."
          },
          "have": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of field keys that are currently populated."
          },
          "need": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of required field keys that are still missing."
          },
          "is_new": {
            "type": "boolean",
            "description": "Whether this submission created a new instance (true) or updated an existing one (false)."
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "When the instance will expire based on context TTL."
          },
          "cascaded": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CascadeResult"
            },
            "description": "Results from auto-executed rules/flows and pending evaluation cascades."
          }
        }
      },
      "DeleteContextInstanceResponse": {
        "type": "object",
        "description": "Response after deleting a context instance.",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message.",
            "example": "Instance deleted"
          },
          "pending_evaluations_cancelled": {
            "type": "integer",
            "description": "Number of pending evaluations that were cancelled when the instance was deleted."
          }
        }
      },
      "SolveContextRuleRequest": {
        "type": "object",
        "description": "Optional request body for solving a rule against context.",
        "properties": {
          "additionalData": {
            "type": "object",
            "description": "Additional data to merge with instance state for rule evaluation.",
            "additionalProperties": true
          },
          "persist": {
            "type": "boolean",
            "description": "Whether to persist derived outputs to the instance.",
            "default": true
          }
        }
      },
      "SolveContextRuleResponse": {
        "type": "object",
        "description": "Response after solving a rule against a context instance.",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["solved", "error"],
            "description": "Whether the rule executed successfully."
          },
          "context": {
            "type": "string",
            "description": "Combined identifier in format 'contextSlug:instanceId'.",
            "example": "customer:cust-12345"
          },
          "rule": {
            "type": "string",
            "description": "The slug of the rule that was executed."
          },
          "result": {
            "type": "object",
            "description": "The rule evaluation result (output values).",
            "additionalProperties": true
          },
          "written_to_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of field keys that were written back to the context instance."
          },
          "cascaded": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CascadeResult"
            },
            "description": "Results from any cascaded evaluations triggered by the rule outputs."
          }
        }
      },
      "SolveContextFlowRequest": {
        "type": "object",
        "description": "Optional request body for executing a flow against context.",
        "properties": {
          "additionalData": {
            "type": "object",
            "description": "Additional data to merge with instance state for flow execution.",
            "additionalProperties": true
          },
          "persist": {
            "type": "boolean",
            "description": "Whether to persist derived outputs to the instance.",
            "default": true
          }
        }
      },
      "SolveContextFlowResponse": {
        "type": "object",
        "description": "Response after executing a flow against a context instance.",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["solved", "error"],
            "description": "Whether the flow executed successfully."
          },
          "context": {
            "type": "string",
            "description": "Combined identifier in format 'contextSlug:instanceId'.",
            "example": "customer:cust-12345"
          },
          "flow": {
            "type": "string",
            "description": "The slug of the flow that was executed."
          },
          "result": {
            "type": "object",
            "description": "The flow execution output.",
            "additionalProperties": true
          },
          "usage": {
            "type": "object",
            "description": "Resource usage information for the flow execution.",
            "additionalProperties": true
          }
        }
      },
      "CascadeContextRequest": {
        "type": "object",
        "description": "Optional request body for triggering a cascade.",
        "properties": {
          "maxDepth": {
            "type": "integer",
            "description": "Maximum depth for cascading evaluations.",
            "default": 10
          }
        }
      },
      "CascadeContextResponse": {
        "type": "object",
        "description": "Response after triggering a cascade re-evaluation of pending rules/flows.",
        "properties": {
          "context": {
            "type": "string",
            "description": "Combined identifier in format 'contextSlug:instanceId'.",
            "example": "customer:cust-12345"
          },
          "cascaded": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CascadeResult"
            },
            "description": "Results from all cascaded evaluations."
          }
        }
      },
      "CascadeResult": {
        "type": "object",
        "description": "Result of an auto-executed or cascaded rule/flow evaluation.",
        "properties": {
          "context": {
            "type": "string",
            "description": "Combined identifier in format 'contextSlug:instanceId'."
          },
          "rule": {
            "type": "string",
            "nullable": true,
            "description": "The rule slug (if this was a rule evaluation)."
          },
          "flow": {
            "type": "string",
            "nullable": true,
            "description": "The flow slug (if this was a flow evaluation)."
          },
          "status": {
            "type": "string",
            "enum": ["solved", "error"],
            "description": "Whether the evaluation succeeded."
          },
          "result": {
            "type": "object",
            "description": "The evaluation output.",
            "additionalProperties": true
          },
          "auto_executed": {
            "type": "boolean",
            "description": "Whether this was auto-executed (true) or from a registered pending evaluation (false)."
          },
          "written_to_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of field keys written back to the context (for rule evaluations)."
          },
          "error": {
            "type": "string",
            "nullable": true,
            "description": "Error message if the evaluation failed."
          }
        }
      },
      "ImportManifestRequest": {
        "type": "object",
        "required": ["manifest"],
        "properties": {
          "manifest": {
            "type": "object",
            "description": "The RBM manifest object containing assets to import.",
            "properties": {
              "version": {
                "type": "string",
                "description": "Manifest format version."
              },
              "rules": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": true
                },
                "description": "Rules to import."
              },
              "flows": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": true
                },
                "description": "Flows to import."
              },
              "contexts": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": true
                },
                "description": "Contexts (entities) to import."
              },
              "values": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": true
                },
                "description": "Dynamic values to import."
              }
            }
          },
          "overwrite": {
            "type": "boolean",
            "description": "Whether to overwrite existing assets with the same ID/slug.",
            "default": false
          }
        }
      },
      "ImportManifestResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message."
          },
          "imported": {
            "type": "object",
            "properties": {
              "rules": {
                "type": "integer"
              },
              "flows": {
                "type": "integer"
              },
              "contexts": {
                "type": "integer"
              },
              "values": {
                "type": "integer"
              }
            },
            "description": "Count of imported assets by type."
          },
          "skipped": {
            "type": "object",
            "properties": {
              "rules": {
                "type": "integer"
              },
              "flows": {
                "type": "integer"
              },
              "contexts": {
                "type": "integer"
              },
              "values": {
                "type": "integer"
              }
            },
            "description": "Count of skipped assets by type (already exist and overwrite=false)."
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string"
                },
                "id": {
                  "type": "string"
                },
                "error": {
                  "type": "string"
                }
              }
            },
            "description": "Any errors encountered during import."
          }
        }
      },
      "ExportManifestRequest": {
        "type": "object",
        "properties": {
          "rules": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Rule IDs or slugs to export."
          },
          "flows": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Flow IDs or slugs to export."
          },
          "contexts": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Context IDs or slugs to export."
          },
          "values": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Value IDs or names to export."
          },
          "includeAll": {
            "type": "boolean",
            "description": "Export all assets of specified types.",
            "default": false
          },
          "preview": {
            "type": "boolean",
            "description": "Return a preview of what would be exported without the full data.",
            "default": false
          }
        }
      },
      "ExportManifestResponse": {
        "type": "object",
        "properties": {
          "version": {
            "type": "string",
            "description": "Manifest format version."
          },
          "exported_at": {
            "type": "string",
            "format": "date-time"
          },
          "rules": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "flows": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "contexts": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "values": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      },
      "ExportManifestPreviewResponse": {
        "type": "object",
        "properties": {
          "counts": {
            "type": "object",
            "properties": {
              "rules": {
                "type": "integer"
              },
              "flows": {
                "type": "integer"
              },
              "contexts": {
                "type": "integer"
              },
              "values": {
                "type": "integer"
              }
            }
          },
          "items": {
            "type": "object",
            "properties": {
              "rules": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "slug": {
                      "type": "string"
                    }
                  }
                }
              },
              "flows": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "slug": {
                      "type": "string"
                    }
                  }
                }
              },
              "contexts": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "slug": {
                      "type": "string"
                    }
                  }
                }
              },
              "values": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "x-api-key"
      }
    }
  },
  "externalDocs": {
    "description": "Rulebricks User Guide",
    "url": "https://rulebricks.com/docs"
  },
  "security": [
    {
      "ApiKeyAuth": []
    }
  ]
}
